2.2.1 组件的定义

定义一个组件有两种方式，使用ES6 class(类组件)和使用函数(函数组件)。

使用class定义组件需要满足两个条件

1）class继承自React.component.

2) class内部必须定义render方法，render方法返回代表该组件UI的React元素。


2.2.2  组件的props

组件的props 用于把父组件中的数据或方法传递给子组件，供子组件使
用。

2.2.3 组件的state

组件的state是组件内部的状态，state的变化最终将反映到组件UI的变化上。**<font color="#ea6f5a" size=3 face="微软雅黑">我们在组件的构造方法constructor中通过this.state定义组件的初始状态，并通过调用this.setState方法改变组件状态(也是唯一改变组件状态的唯一方式)，</font>**进而组件UI也会随之重新渲染。


**<font color="#ea6f5a" size=3 face="微软雅黑">组件的props和state都会直接影响组件的UI。事实上，React组件可以看作是一个函数，函数的输入props和state，函数的输出是组件的UI。</font>**


React组件正是由props和state两种类型的数据驱动渲染出组件UI。props是组件对外的接口，组件通过props接收外部传入的数据(包括方法)；state是组件对内的接口，组件内部状态的变化通过state来反映。另外，props是只读的，你不能在组件内部修改props；state是可变的，组件的变化通过修改state来实现。


2.2.4有状态组件和无状态组件

state用来反映组件内部状态的变化。如果一个组件的内部状态是不变的，当然就用不到state，这样的组件称之为无状态组件。反之，一个组件的内部状态会发生变化，就需要使用state来保存变化，这样的组件称之为有状态组件。

定义无状态组件除了使用ES class的方式爱，还可以使用函数定义。一个函数组件接收props作为参数，返回代表这个组件UI的React元素结构。如:

	function Welcome(props) {
	   return <hl>Hello, {props . name}</hl>;
	}

函数组件的写法比类组件的写法要简洁很多，在使用无状态组件时，应该尽量将其定义成函数组件.

在开发React 应用时， 一定要先认真思考哪些组件应该设计成有状态组件，哪些组件应该设计成无状态组件。并且，应该尽可能多地使用无状态组件，无状态组件不用关心状态的变化，只聚焦于Ul 的展示，因而更容易被复用。React 应用组件设计的一般思路是，通过定义少数的有状组件管理整个应用的状态变化，并且将状态通过props 传递给其余的无态组件，由无状态组件完成页面绝大部分UI 的渲染工作。总之，有状态组件主要关注处理状态变化的业务逻辑，无状态组件主要关注组件UI 的渲染。


2.2.5 属性校验和默认属性

props 是一个组件对外暴露的接口，但到目前为止，组件内部并没有明显地声明它暴露出哪些接口，以及这些接口的类型是什么，这不利于组件的复用。幸运的是， React 提供了PropTypes 这个对象，用于校验组件属性的类型。Prop Types 包含组件属性所有可能的类型，我们通过定义一个对象（对象的key 是组件的属性名， value 是对应属性的类型）实现组件属性类型的校验。例如:

	import PropTypes from ’ prop-types ’;
	class Postitem extends React . Component {
	// ......
	Postitem.propTypes = {
		post : PropTypes.object ,
		onVote : PropTypes . func
	};

PropTypes 可以校验的组件属性类型

| 类型 | PropTypes 对应属性 |
| ------ | ------ |
| String | PropTypes.string |
| Number | PropTypes.number |
| Boolean | PropTypes.bool |
| Function | PropTypes.func|
| Object | PropTypes .object|
| Array | PropTypes.array|
| Symbol | PropTypes.symbol|
| Element ( React 元素） | PropTypes .element|
| Node （可被渲染的节点：数字、字符串、React 元素或由这些类型的数据组成的数组〉 | PropTypes.noae|

当使用PropTypes.object或PropTypes.array校验属性类型时，我们只知道这个属性是一个对象或一个数组，至于对象的结构或数组元素的类型是什么样的，依然无从得知。这种情况下，更好的做法是使用PropType.shape或PropTypes.arrayof。例如:

	style: PropTypes . shape ({
		color: PropTypes . string ,
		fontSize : PropTypes . number, 
	)}
	
	sequence : PropTypes.arrayOf (PropTypes.number)

表示style 是一个对象，对象有color和fontSize两个属性， color 是字符串类型，fontSize 是数字类型

sequence是一个数组，数组的元素是数字。


如果属性是组件的必需属性，也就是当使用某个组件时，必须传入的属性，就需要在PropTypes的类型属性上调用is Required 。在BBS项目中，对于Postltem 组件， post 和onVote都是必需属性，Postltem 的prop Types 定义如下：

	Postitem.propTypes = {
		post: PropTypes.shape ( {
			id : PropTypes . number ,
			title: PropTypes.string,
			author : PropTypes . string ,
			date : PropTypes.string ,
			vote : PropTypes.number
	)).isRequired ,
	onVote:PropTypes.func.isRequired
	}


React还提供了为组件属性指定默认值的特性，这个特性通过组件的defaultProps实现。当组件属性未被赋值时，组件会使defaultProps 定义的默认属性。例如：

	function Welcome(props) {
	  return <hl className='foo'>Hello, {props.name}</hl > ;
	}
	
	Welcome.defaultProps = {
	  name :'Stranger'
	};


2.2.7 组件和元素

React元素是一个普通的JavaScript对象，这个对象通过DOM节点或React组件描述界面是什么样子的。JSX语法就是用来创建React元素的(不要忘了， JSX 语法实际上是调用了React.createElement 方法)

//Button是一个自定义的React组件

	<div className=’ foo ’>
		<Button color= ’ blue ’ >
			OK
		</Button>
	</div>

上面的JSX 代码会创建下面的React 元素：

	{
	    type: 'div',
	    props: {
	        className: ’f oo’,
	        children: {
	            type: ’Button’,
	            props: {
	                color: ’blue’,
	                children: ’OK’
	            }
	        }
	    }
	}


React组件是一个class 或函数，它接收一些属性作为输入，返回一个React元素。React组件是由若干React元素组建而成的。通过下面的例子，可以解释React组件与React元素间的关系。

//Button 是一个React 组件

	class Button extends React.Component {
	  render() {
	    return <button>OK</button>;
	  }
	}


//在JSX 中使用组件Button, button是一个代表组件Button 的React元素

`const button = <Button/>`;

//在组件Page 中使用React 元素button

	class Page extends React.Component {
	  render() {
	    return <div>{button}</div>;
	  }
	}


//上面的Page 写法等价于下面这种写法：